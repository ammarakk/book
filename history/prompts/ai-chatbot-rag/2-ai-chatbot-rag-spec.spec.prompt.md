---
id: 2
title: ai-chatbot-rag-spec
stage: spec
date: 2025-01-04
surface: agent
model: gpt-4
feature: ai-chatbot-rag
branch: 002-ai-chatbot-rag
user: User
command: /sp.specify
labels: ["spec", "ai", "chatbot", "rag", "docusaurus", "book", "robotics"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
 - C:\\Users\\User\\Documents\\books\\specs\\002-ai-chatbot-rag\\spec.md
 - C:\\Users\\User\\Documents\\books\\specs\\002-ai-chatbot-rag\\checklists\\requirements.md
tests:
 - none
---

## Prompt

```
/sp.specify Phase 2 ‚Äì AI Chatbot (RAG System) Phase Name: Phase 2 ‚Äì Embedded AI Chatbot for Physical AI & Humanoid Robotics Book Objective: Design and specify an embedded Retrieval-Augmented Generation (RAG) chatbot that answers user questions strictly from the book content. The chatbot must integrate seamlessly into the Docusaurus UI and follow all constitution constraints. This phase focuses ONLY on chatbot intelligence and retrieval. No authentication, personalization, or translation is allowed. -------------------------------------------------- SCOPE (IN-SCOPE ONLY) -------------------------------------------------- 1. Chatbot Capabilities - Embedded chatbot UI inside the book - Floating chatbot icon (robot-themed, animated) - Context-aware responses based on book content - Answers must be grounded in retrieved documents - Ability to answer questions using: - Entire book context - User-selected text only (strict mode) 2. RAG Architecture - Vector-based retrieval using Qdrant Cloud (Free Tier) - Metadata storage using Neon Serverless PostgreSQL - Backend API using FastAPI - Chunking and embedding of book content - Deterministic retrieval + generation pipeline 3. LLM Configuration - LLM Provider: Ollama (local or server-hosted) - Supported models must be explicitly defined in config - No OpenAI, Gemini, or Claude API usage for inference - Claude Code allowed ONLY as orchestration/spec tool 4. UI / UX Requirements - Chatbot icon must be: - Robot-themed - Animated (hover / idle animation) - Chat panel must: - Open as overlay or side panel - Not disrupt reading experience - Visual style must match: - Neon robotic theme - Phase 1 UI consistency 5. Context Control - Two chat modes: 1. Global Mode ‚Äì uses full indexed book 2. Selection Mode ‚Äì answers ONLY from selected text - Selection mode must hard-fail if answer is not found -------------------------------------------------- OUT OF SCOPE (STRICT) -------------------------------------------------- - User authentication - Signup / Signin - Personalization - Translation - User memory - Analytics - Model fine-tuning - Deployment automation -------------------------------------------------- TECH STACK (LOCKED) -------------------------------------------------- Frontend: - Docusaurus - React - CSS / Framer Motion (animations) Backend: - FastAPI - REST API only (no WebSockets in this phase) Databases: - Qdrant Cloud (vector store) - Neon Serverless PostgreSQL (metadata, document refs) AI: - Ollama (LLM runtime) - Embedding model compatible with Ollama - Claude Code Subagents NOT allowed in runtime -------------------------------------------------- DATA FLOW (MANDATORY) -------------------------------------------------- 1. Book Content - Markdown files parsed - Chunked deterministically - Embedded and stored in Qdrant - Metadata stored in Neon 2. User Query - Query received from UI - Context mode determined (global or selection) - Relevant chunks retrieved from Qdrant - Prompt assembled with strict grounding rules - Answer generated by Ollama - Response returned to UI -------------------------------------------------- SECURITY & RULES -------------------------------------------------- - No hallucinations allowed - If answer not found ‚Üí respond with: "This information is not available in the book." - No external web access - No cross-phase feature leakage - API keys must be loaded via environment variables -------------------------------------------------- SUCCESS CRITERIA -------------------------------------------------- Phase 2 is successful when: - Chatbot is visible and usable inside the book - Answers come only from indexed book content - Selection-only answering works correctly - UI animations function smoothly - Backend RAG pipeline is stable - Phase passes verification and is locked -------------------------------------------------- DELIVERABLES -------------------------------------------------- - Chatbot UI component - FastAPI RAG backend - Qdrant vector index - Neon metadata schema - Environment variable template - Verification checklist -------------------------------------------------- PHASE EXIT RULE -------------------------------------------------- Phase 2 is locked ONLY after: - Manual verification passes - No constitution violations - No Phase 3 features present -------------------------------------------------- FINAL NOTE -------------------------------------------------- This specification defines WHAT must be built. Planning defines HOW it will be built. Implementation executes ONLY this scope. Any deviation must be rejected.
```

## Response snapshot

Successfully created the feature specification for Phase 2 ‚Äì Embedded AI Chatbot for Physical AI & Humanoid Robotics Book. The specification includes:

1. Created branch 002-ai-chatbot-rag
2. Created comprehensive spec document at specs/002-ai-chatbot-rag/spec.md
3. Created quality checklist at specs/002-ai-chatbot-rag/checklists/requirements.md

The specification includes:
- Constitution compliance checks to ensure phase isolation
- Three user stories covering chatbot interaction, context selection mode, and UI integration
- 16 functional requirements detailing all aspects of the chatbot system
- 7 measurable success criteria
- 6 key entities identified

The specification is complete and ready for the planning phase (/sp.plan).

## Outcome

- ‚úÖ Impact: Created comprehensive feature specification for Phase 2 of the Physical AI & Humanoid Robotics Book project
- üß™ Tests: No tests required for this specification task
- üìÅ Files: 2 files created (spec.md and requirements checklist)
- üîÅ Next prompts: Ready for /sp.plan to create implementation plan
- üß† Reflection: The specification properly maintains phase isolation as required by the constitution

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): N/A for this documentation task
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): Proceed with /sp.plan to create implementation plan